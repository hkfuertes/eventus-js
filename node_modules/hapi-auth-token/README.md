# hapi header auth token

[**hapi**](https://github.com/hapijs/hapi) Header Access Token authentication scheme

Header authentication requires validating a token passed in by HTTP headers. The `'header-access-token'` scheme takes the following options:

- `validateFunc` - (required) a token lookup and validation function with the signature `function(tokens, callback)` where:
    - `tokens` - the auth token received from the client.
    - `callback` - a callback function with the signature `function(err, isValid, credentials)` where:
        - `err` - an internal error.
        - `isValid` - `true` if both the username was found and the password matched, otherwise `false`.
        - `credentials` - a credentials object passed back to the application in `request.auth.credentials`. Typically, `credentials` are only
          included when `isValid` is `true`.
- `options` - (optional)
    - `accessTokenName` (Default: 'access_token') - Rename the token query/cookie parameter key e.g. 'sample_token_name' would rename the token query parameter to /route1?sample_token_name=12345678.


For convenience, the `request` object can be accessed from `this` within validateFunc. If you want to use this, you must use the `function` keyword instead of the arrow syntax. This allows some greater flexibility with authentication, such different authentication checks for different routes.

```javascript
const Hapi = require('hapi');
const AuthBearer = require('hapi-auth-bearer-token');

const server = new Hapi.Server();
server.connection({ port: 8080 });

server.register(AuthBearer, (err) => {

    server.auth.strategy('simple', 'header-access-token', {
        tokenNames: ['ApplicationToken','UserToken'],    // optional, 'access_token' by default
        validateFunc: function (tokens, callback) {
          //console.log(tokens);
          appToken = tokens['ApplicationToken'];

          if(appToken == "app_token")
           return callback(null, true, "Username");
          else
           return callback("No app registered", false, null);
        }
    });

    server.route({
        method: 'GET',
        path: '/',
        config: {
           auth: 'simple',
           handler: function (request, reply) {

              return reply('success');
           }
        }
    });

    server.start((err) => {

        if (err) {
          throw err;
        }
        console.log('Server started at: ' + server.info.uri);
    })
});
```
This was originally forked and modified from: [**johnbrett/bearer-access-token**](https://github.com/johnbrett/hapi-auth-bearer-token)
